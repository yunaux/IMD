# flutter 调研
## 1. flutter简介
###  1.1 Flutter简介
    Flutter是Google开发的一套全新的跨平台、开源UI框架，也是一款移动应用程序SDK，包含框架、widget和工具，支持iOS、Android系统开发，并且是未来新操作系统Fuchsia的默认开发套件.
    为开发人员提供了一种在Android和iOS上构建和部署精美移动应用程序的简单高效的方式。
### 1.2 Flutter便利性
    对于用户来说，Flutter可以使应用界面变得美丽生动。

    对于开发者来说，Flutter降低了开发移动应用程序的门槛。它加速了移动应用程序的开发过程，并降低了同时开发iOS和Android两套应用程序的成本和复杂性。

    对于设计师来说，Flutter有助于实现原始设计愿景，高保真度、不妥协。它也是一种高效的原型工具。
### 1.3 Flutter SDK
* 深度优化了的、移动优先的2D渲染引擎
* 现代、响应式框架
* 丰富的Android和iOS套件
* 单元和集成测试的API
* 连接到系统和第三方SDK的Interop和插件API
* 无头的测试运行器，用于在Windows、Linux和Mac上运行测试
* 用于创建、构建、测试和编译应用程序的命令行工具

### 1.4 flutter提供了Android Studio、 IntelliJ IDEA和VS Code插件
### 1.5 flutter采用语言
    Dart语言
*Dart在以下主要标准上得到高分：* 

* **开发人员的效率**。Flutter的主要价值主张之一是通过让开发人员使用相同的代码库为iOS和Android创建应用程序，从而节省了工程资源。使用高效的语言可以进一步加速开发周期，并使Flutter更具吸引力。这对我们的framework团队和开发人员都非常重要。大部分Flutter功能都是用Dart实现，因此我们需要在10万行代码时能保持高效的而不会牺牲framework和widget的可读性。
* **面向对象**。虽然我们可以使用非面向对象的语言，但这意味着要重新解决几个难题。另外，绝大多数开发人员都具有面向对象开发的经验，因此更容易学习如何使用Flutter进行开发。
* **可预测，高性能**。借助Flutter，我们希望使开发人员能够快速创建流畅的用户体验。为了实现这一点，我们需要能够在每个动画帧中运行大量的代码。这意味着我们需要一种既能提供高性能又能提供可预测性能的语言，而不会出现会导致丢帧的周期性暂停。
* **快速内存分配**。Flutter框架使用函数式流，它很大程度上依赖于底层的内存分配器，从而有效地处理小的、短期的内存分配会非常重要，所以在缺乏此功能的语言中Flutter无法有效地工作。


## 2. flutter技术调研
### 2.1 Flutter支持的设备和操作系统版本
    移动操作系统：Android Jelly Bean，v16,4.1.x或更新的版本以及iOS 8或更新版本。

    移动硬件：64位iOS设备（从iPhone 5S和更新的iPhone型号开始）以及ARM Android设备。

*目前不支持：*

ARM32 iOS设备（iPhone 4，iPhone 5）

x86 Android设备
### 2.2 Flutter框架使用的编程范式
* 组合：Flutter使用的主要范例是使用小对象，然后将它们组合在一起以获得更复杂的对象。Flutter widget库中的大多数widget都是以这种方式构建的。例如，Material FlatButton 类是使用MaterialButton 类构建， 该类本身使用IconTheme、InkWell、Padding、Center、Material、AnimatedDefaultTextStyle和ConstrainedBox组合 构建。该InkWell 使用内置GestureDetector。Material 是使用内置AnimatedDefaultTextStyle、NotificationListener和AnimatedPhysicalModel。等等，它们都是widget。
* 函数式编程：整个应用程序可以仅使用StatelessWidget来构建 ，这些函数本质上是描述参数如何映射到其他函数的函数。在计算布局或绘制图形的底层（这些应用程序不拥有状态，因此通常是非交互式的）例如，Icon widget本质上是一个将其参数（颜色、 icon、size）映射到布局基本单元的函数。此外，大量使用的是不可变数据结构，包括整个Widget类层次结构以及许多支持类，如 Rect和 TextStyle也都是。Dart中的Iterable API经常用来处理框架中的值列表，它大量使用了函数式（map，reduce，where等）方法。
* 事件驱动：用户交互由事件对象表示，这些事件对象被分派给注册了事件处理程序的回调。屏幕刷新也由类似的回调机制触发。监听类是动画系统的基础，它确立了与多个监听事件订阅模式。
* 基于类的面向对象编程：框架的大部分API都是使用继承类来构建的。我们使用一种方法来在基类中定义非常抽象的API，然后在子类中迭代地对它们进行定制化。例如，我们的渲染对象有一个与坐标系无关的基类（RenderObject），然后我们有一个子类（RenderBox），它引入了基于笛卡尔坐标系（x / width）和Y /高度）。
* 基于原型的面向对象编程： ScrollPhysics 类将实例链接起来组成适用于在运行时动态滚动的physics。这使得系统可以编写包含特定平台physics的分页physics，而无需在编译时选择平台。
* 命令式编程：直接命令式编程通常与对象内部封装的状态配对，用于提供最直观的解决方案。例如，测试是以一种强制性风格编写的，首先描述测试中的情况，然后列出测试必须匹配的不变量，然后根据测试需要推进时钟或插入事件。
* 响应式编程：widget和元素树有时被描述为响应式的，因为在widget的构造函数中提供的新输入会立即作为widget的构建方法对较低级别widget的更改传播，并在较低widget中进行更改（例如，作为响应到用户输入）通过事件处理程序传播回widget树。根据widget的需求，功能向应和命令响应两方面都存在于框架中。具有构建方法的widget仅由一个表达式组成，该表达式描述了widget如何对其配置中的变化做出反应的功能响应widget（例如，Divider类）。 构建方法通过几个语句构建子项列表的widget，描述了widget如何对其配置中的更改作出反应，这些都是命令性响应widget（例如 Chip类）。
* 声明式编程：widget的构建方法通常是具有多层嵌套构造函数的单一表达式，使用Dart的严格声明子集编写。这样的嵌套表达式可以机械地转换成任何适合表达的标记语言或从任何适合表达的标记语言转换。例如， UserAccountsDrawerHeader widget具有很长的构建方法（20行以上），由单个嵌套表达式组成。这也可以与命令式风格相结合来构建用纯粹声明式方法难以描述的UI。
* 泛型：类型可用于帮助开发人员及早发现编程错误。Flutter框架使用泛型编程来处理这个问题。例如， State类根据其关联widget的类型进行参数化，以便Dart分析器可以捕获状态和widget的不匹配。类似地， GlobalKey类需要的类型参数，以便它可以访问远程widget的状态下在一个类型安全的方式（使用运行时检查）， 路由接口是参数化时，它是预期使用类型 pop和集合，例如List、Map和 Set都是参数化的，这样可以在分析过程中或在调试期间的运行时提前捕获不匹配的元素。
* 并发：Flutter大量使用 Future和其他异步API。例如，动画系统通过Future来完成动画完成时的通知。图像加载系统同样使用Future在加载完成时进行报告。
* 约束：Flutter中的布局系统使用弱形式的约束编程来确定场景的几何形状。约束（例如，对于笛卡尔盒子，最小和最大宽度以及最小和最大高度）从父母传递给孩子，并且孩子选择生成的几何结构（例如，对于笛卡尔盒子，大小，特别是宽度和高度）满足这些限制。通过使用这种技术，Flutter通常可以通过一次遍布整个场景。
